## 11. equals를 재정의하려거든 hashCode도 재정의하라

- `equals`를 재정의한 모든 클래스에서 `hashCode`도 재정의해야 한다. 그렇지 않으면 HashMap이나 HashSet 같은 컬렉션의 원소로 사용할 때 문제를 일으킨다.

---

### 1. hashCode 규약

1. equals 비교에 사용되는 정보가 변경되지 않았다면 hashCode 메소드는 호출될 때 마다 항상 같은 값을 반환해야 한다.
2. equals(Object)가 true를 반환했다면 두 객체의 hashCode는 똑같은 값을 반환해야 한다.
3. equals(Object)가 false를 반환했어도 두 객체의 hashCode가 똑같을 수 있다. (해시 충돌)

---

### 2. hashCode 구현 방법

1. equals 메소드에서 사용되지 않은 필드는 `반드시` 제외해야 한다.
2. 클래스가 불변이고, 해시 값을 계산하는 비용이 크다면 캐싱 방식을 고려한다.
   - 이 타입의 객체가 주로 해시의 키로 계산된다면 객체가 생성될 때 미리 해시 값을 계산해 놓는다.
   - 해시의 키로 사용되지 않는다면 hashCode가 처음 호출될 때 계산하는 `지연 초기화` 전략을 사용한다.

---

>equals를 재정의할 때는 hashCode도 반드시 재정의해야 한다. 그렇지 않으면 프로그램이 제대로 동작하지 않을 것이다. 서로 다른 인스턴스라면 되도록 해시코드도 서로 다르게 구현해야 한다. AutoValue 프레임워크를 사용하면 equals와 hashCode를 자동으로 만들어준다.